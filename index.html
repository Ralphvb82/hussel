<!-- index.html -->
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hussel Aanmelding</title>

</head>
<style>/* css/style.css */
/* ========== Root & vars ========== */
:root {
  --primary: #0A3D91;
  --accent: #E5A00D;
  --bg: #f9f9f9;
  --fg: #222;
  --radius: 0.5rem;
  --gap: 1rem;
  --transition: 0.2s ease;
}

/* ========== Base ========== */
* { box-sizing: border-box; }
body {
  margin: 0; padding: var(--gap);
  font-family: sans-serif; color: var(--fg);
  background: var(--bg);
}
header { text-align: center; margin-bottom: var(--gap); }
.logo { height: 80px; }

/* ========== Forms & buttons ========== */
form { max-width: 500px; margin: 0 auto; display: grid; gap: var(--gap); }
fieldset { border: 1px solid var(--primary); padding: var(--gap); border-radius: var(--radius); }
legend { font-weight: bold; }
label { display: block; margin-bottom: 0.25rem; }
input[type="text"], button[type="submit"] {
  width: 100%; padding: 0.5rem; border-radius: var(--radius);
  border: 1px solid #ccc;
}
button {
  padding: 0.5rem 1rem; border: none; border-radius: var(--radius);
  background: var(--primary); color: #fff; cursor: pointer;
  transition: background var(--transition);
}
button:hover { background: var(--accent); }
button:disabled {
  background: #999; cursor: not-allowed;
}

/* ========== Mode & singles buttons ========== */
.modes button, #singles-question button {
  width: calc(33% - 0.66rem); margin-right: 1%;
}
.modes button:last-child, #singles-question button:last-child {
  margin-right: 0;
}
button.active {
  box-shadow: 0 0 0 3px var(--accent);
}

/* ========== Summary ========== */
.summary {
  padding: var(--gap); background: #fff; border-radius: var(--radius);
  border: 1px solid #ddd; min-height: 2em;
}

/* ========== Player list ========== */
#playerList { max-width: 600px; margin: var(--gap) auto; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 0.5rem; border: 1px solid var(--primary); text-align: left; }
.action-btn { cursor: pointer; }

/* ========== Admin panel ========== */
#admin-panel { margin: var(--gap) auto; max-width: 500px; text-align: center; }
#admin-panel[hidden] { display: none; }

/* ========== Responsive ========== */
@media (max-width: 600px) {
  .modes button, #singles-question button { width: 100%; margin-bottom: 0.5rem; }
}

#singles-question[aria-hidden="true"] {
  display: none !important;
}
/* Hou de ruimte voor de singles-vraag, ook als hij ‚Äòverborgen‚Äô is */
#singles-question[hidden] {
  /* niet uit de flow halen */
  display: block !important;
  /* wel onzichtbaar maken */
  visibility: hidden;
}
/* Container voor alle courts */
#courtList {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 1rem 0;
}

/* √â√©n court-card */
.court-card {
  background: #fff;
  border-radius: .5rem;
  padding: 1rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.court-card h3 {
  margin-top: 0;
  font-size: 1.1rem;
  color: var(--primary);
  text-align: center;
}

.court-card ul {
  list-style: none;
  padding-left: 0;
}

.court-card ul li {
  position: relative;
  padding-left: 1.2em;
  margin: .3em 0;
}

.court-card ul li::before {
  content: 'üéæ';
  position: absolute;
  left: 0;
  top: 0;
}

.toast {
  position: fixed;
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: #fff;
  padding: .5rem 1rem;
  border-radius: .5rem;
  opacity: 0;
  transition: opacity .3s;
  pointer-events: none;
}
.toast.show {
  opacity: 1;
}

/* Hou ruimte vrij, maar verberg visueel */
#singles-question.hide {
  visibility: hidden;
}

#singles-question.show {
  visibility: visible;
}
</style>
<body>
  <header class="header">
    <img src="Logo.png" alt="Clublogo" class="logo" />
    <h1>Hussel Aanmelding</h1>
  </header>

  <main>
    <form id="signup-form" novalidate>
      <fieldset>
        <legend>Jouw gegevens</legend>
        <label for="firstName">Voornaam</label>
        <input type="text" id="firstName" required />

        <label for="lastName">Achternaam</label>
        <input type="text" id="lastName" required />
      </fieldset>

      <fieldset class="modes">
        <legend>Keuze</legend>
        <button type="button" data-mode="Tennis">Tennis</button>
        <button type="button" data-mode="Padel">Padel</button>
        <button type="button" data-mode="Flexibel">Flexibel</button>
      </fieldset>

      <fieldset id="singles-question" hidden>
        <legend>Wil je eventueel singelen?</legend>
        <button type="button" data-singles="yes">Ja</button>
        <button type="button" data-singles="no">Nee</button>
      </fieldset>

      <div class="summary" aria-live="polite"></div>

      <button type="submit" id="confirmBtn" disabled>Aanmelden</button>
    </form>

    <button id="toggleList" aria-expanded="false">Toon inschrijvingen</button>
    <section id="playerList" hidden>
      <h2>Inschrijvingen</h2>
      <table>
        <thead>
          <tr><th>Naam</th><th>Keuze</th><th>Singel</th><th>Actie</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <aside id="admin-panel">
    <button id="unlockAdmin">Begeleidersmodus</button>
    <input type="password" id="adminPin" placeholder="Pincode" hidden />
    <div id="adminControls" hidden>
      <button id="makeTeams">Maak indeling</button>
      <button id="nextRound">Nieuwe ronde</button>
    </div>
    <section id="courtList"></section>
    <section id="leftover"></section>
  </aside>

  <script>(function(){
  'use strict';

  // --- Config & State ---
  const ADMIN_PIN = '1234';
  const tennisCourts = ["Tennisbaan 1","Tennisbaan 2","Tennisbaan 3","Tennisbaan 4","Tennisbaan 5","Tennisbaan 6"];
  const padelCourts  = ["Padelbaan A","Padelbaan B","Padelbaan C","Padelbaan D"];

  const state = {
    players: [],      // {name, mode, singles, active, order}
    pendingMode: null,
    pendingSingles: null,
    editIndex: null,
    adminUnlocked: false
  };

  // --- DOM refs ---
  const form         = document.getElementById('signup-form');
  const firstName    = document.getElementById('firstName');
  const lastName     = document.getElementById('lastName');
  const modeBtns     = document.querySelectorAll('.modes button');
  const singleFld    = document.getElementById('singles-question');
  const singleBtns   = singleFld.querySelectorAll('button');
  const summaryDiv   = document.querySelector('.summary');
  const confirmBtn   = document.getElementById('confirmBtn');
  const toggleList   = document.getElementById('toggleList');
  const playerList   = document.querySelector('#playerList tbody');
  const toastEl      = document.getElementById('toast');

  // Admin elements
  const adminPanel     = document.getElementById('admin-panel');
  const unlockBtn      = document.getElementById('unlockAdmin');
  const adminPinInput  = document.getElementById('adminPin');
  const adminControls  = document.getElementById('adminControls');
  const makeTeamsBtn   = document.getElementById('makeTeams');
  const nextRoundBtn   = document.getElementById('nextRound');
  const courtListSec   = document.getElementById('courtList');
  const leftoverSec    = document.getElementById('leftover');
  let round2ListDiv    = null;

  // --- Helper Functions ---
  function showToast(msg) {
    toastEl.textContent = msg;
    toastEl.classList.add('show');
    setTimeout(()=> toastEl.classList.remove('show'), 2000);
  }

  function renderSummary(){
    if(!firstName.value.trim() || !lastName.value.trim() || !state.pendingMode) {
      summaryDiv.textContent = '';
      return;
    }
    let text = `${firstName.value.trim()} ${lastName.value.trim()} kiest ${state.pendingMode}`;
    if(state.pendingMode !== 'Padel') {
      text += state.pendingSingles ? ' (singel optioneel)' : '';
    }
    summaryDiv.textContent = text;
  }

  function validateForm(){
    const nameOk    = firstName.value.trim() && lastName.value.trim();
    const modeOk    = !!state.pendingMode;
    const singlesOk = state.pendingMode === 'Padel' || state.pendingSingles !== null;
    confirmBtn.disabled = !(nameOk && modeOk && singlesOk);
  }

  function clearSelection(){
    modeBtns.forEach(b=> b.classList.remove('active'));
    singleBtns.forEach(b=> b.classList.remove('active'));
  }

  function refreshPlayerList(){
    playerList.innerHTML = '';
    state.players.forEach((p,i)=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${p.name}</td>
        <td>${p.mode}</td>
        <td>${p.singles ? 'Ja' : 'Nee'}</td>
        <td>
          <span class="action-btn" data-edit="${i}">‚úèÔ∏è</span>
          <span class="action-btn" data-remove="${i}">‚ùå</span>
        </td>`;
      playerList.appendChild(tr);
    });
  }

  // --- Signup Flow ---
  modeBtns.forEach(btn=>{
    btn.addEventListener('click', ()=> {
      clearSelection();
      btn.classList.add('active');
      state.pendingMode = btn.dataset.mode;
      state.pendingSingles = (state.pendingMode === 'Padel') ? false : null;
      singleFld.hidden = (state.pendingMode === 'Padel');
      renderSummary(); validateForm();
    });
  });

  singleBtns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      clearSelection();
      btn.classList.add('active');
      state.pendingSingles = (btn.dataset.singles === 'yes');
      renderSummary(); validateForm();
    });
  });

  [firstName, lastName].forEach(input => {
    input.addEventListener('input', ()=>{ renderSummary(); validateForm(); });
    input.addEventListener('keyup', e => {
      if(e.key === 'Enter' && !confirmBtn.disabled) {
        form.dispatchEvent(new Event('submit', { cancelable: true, bubbles: true }));
      }
    });
  });

  form.addEventListener('submit', e=>{
    e.preventDefault();
    const fullname = `${firstName.value.trim()} ${lastName.value.trim()}`;
    if(state.editIndex != null) {
      Object.assign(state.players[state.editIndex], { name: fullname, mode: state.pendingMode, singles: state.pendingSingles });
      state.editIndex = null;
    } else {
      state.players.push({ name: fullname, mode: state.pendingMode, singles: state.pendingSingles, active: true, order: Date.now() });
    }
    // reset
    form.reset(); clearSelection();
    state.pendingMode = state.pendingSingles = null;
    singleFld.hidden = true;
    renderSummary(); validateForm(); refreshPlayerList();
    showToast('Inschrijving succesvol!');
  });

  toggleList.addEventListener('click', ()=>{
    const sec = document.getElementById('playerList');
    const show = sec.hidden;
    sec.hidden = !show;
    toggleList.setAttribute('aria-expanded', show);
  });

  playerList.addEventListener('click', e=>{
    const idxEdit = e.target.dataset.edit;
    const idxRemove = e.target.dataset.remove;
    if(idxEdit != null) {
      const p = state.players[idxEdit];
      firstName.value = p.name.split(' ')[0];
      lastName.value = p.name.split(' ').slice(1).join(' ');
      state.pendingMode = p.mode; state.pendingSingles = p.singles; state.editIndex = Number(idxEdit);
      clearSelection();
      document.querySelector(`.modes button[data-mode="${p.mode}"]`).classList.add('active');
      if(p.mode !== 'Padel') { singleFld.hidden = false; document.querySelector(`#singles-question button[data-singles="${p.singles ? 'yes' : 'no'}"]`).classList.add('active'); }
      renderSummary(); validateForm();
    } else if(idxRemove != null) {
      state.players.splice(idxRemove,1); refreshPlayerList();
    }
  });

  // --- Admin Flow ---
  unlockBtn.addEventListener('click', ()=>{ adminPinInput.hidden = false; adminPinInput.focus(); });
  adminPinInput.addEventListener('keyup', e=>{
    if(e.key === 'Enter'){
      if(adminPinInput.value === ADMIN_PIN){
        state.adminUnlocked = true; adminControls.hidden = false; unlockBtn.hidden = true; adminPinInput.hidden = true;
      } else alert('Verkeerde pincode!');
    }
  });

  function makeTeams() {
    if(!state.adminUnlocked) return;
    const active = state.players.filter(p=>p.active);
    // categorize
    let tennisOnly    = active.filter(p=>p.mode==='Tennis' && !p.singles);
    let tennisSingles = active.filter(p=>p.mode==='Tennis' && p.singles);
    let padelOnly     = active.filter(p=>p.mode==='Padel');
    let flexNo        = active.filter(p=>p.mode==='Flexibel' && !p.singles);
    let flexSi        = active.filter(p=>p.mode==='Flexibel' && p.singles);
    // helpers
    const shuffle = arr=>{ for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} };
    const formTeams = (list,size)=>{ shuffle(list); const t=[]; while(list.length>=size) t.push(list.splice(0,size)); return t; };
    // build teams
    let padelAll = [...padelOnly]; while(padelAll.length%4!==0 && flexNo.length) padelAll.push({...flexNo.shift(),mode:'Padel'});
    while(padelAll.length%4!==0 && flexSi.length) padelAll.push({...flexSi.shift(),mode:'Padel'});
    const padelTeams = formTeams(padelAll,4);
    let tennisAll = [...tennisOnly]; while(tennisAll.length%4!==0 && flexNo.length) tennisAll.push({...flexNo.shift(),mode:'Tennis'});
    while(tennisAll.length%4!==0 && flexSi.length) tennisAll.push({...flexSi.shift(),mode:'Tennis'});
    const tennisTeams = formTeams(tennisAll,4);
    // singles
    const singlesCandidates=[...tennisSingles,...flexSi]; shuffle(singlesCandidates);
    const singlesMatch = singlesCandidates.length>=2 ? singlesCandidates.slice(0,2).map(p=>({...p,mode:'Tennis'})) : [];
    // assemble courts
    const courts = [];
    padelTeams.slice(0,padelCourts.length).forEach((team,i)=>courts.push({court:padelCourts[i],players:team}));
    tennisTeams.slice(0,tennisCourts.length).forEach((team,i)=>courts.push({court:tennisCourts[i],players:team}));
    if(singlesMatch.length===2 && courts.filter(c=>c.court.startsWith('Tennis')).length<tennisCourts.length){
      const idx=courts.filter(c=>c.court.startsWith('Tennis')).length;
      courts.push({court:tennisCourts[idx]+' (singel)',players:singlesMatch});
    }
    // render cards
    courtListSec.innerHTML = courts.map(c=>
      `<div class="court-card"><h3>${c.court}</h3><ul>${c.players.map(p=>`<li>${p.name}</li>`).join('')}</ul></div>`
    ).join('');
    // leftovers
    const assigned = courts.flatMap(c=>c.players.map(p=>p.name));
    const leftovers = active.filter(p=>!assigned.includes(p.name));
    leftoverSec.innerHTML = leftovers.length? `<h3>Resterende spelers</h3><table class="leftover-table"><tr><th>Naam</th><th>Keuze</th><th>Singel</th></tr>${leftovers.map(p=>`<tr><td>${p.name}</td><td>${p.mode}</td><td>${p.singles?'Ja':'Nee'}</td></tr>`).join('')}</table>`:'';
  }

  function prepareNextRound() {
    if(!state.adminUnlocked) return;
    if(round2ListDiv) round2ListDiv.remove();
    round2ListDiv = document.createElement('div');
    round2ListDiv.innerHTML = '<h3>Selecteer spelers voor ronde 2</h3>' + state.players.map((p,i)=>`<div><input type="checkbox" id="chk${i}" ${p.active?'checked':''}/> ${p.name}</div>`).join('') + '<button id="confirmRound2">Bevestig ronde 2</button>';
    adminPanel.appendChild(round2ListDiv);
    document.getElementById('confirmRound2').addEventListener('click', ()=>{
      state.players.forEach((p,i)=> p.active = document.getElementById(`chk${i}`).checked);
      round2ListDiv.remove(); refreshPlayerList();
    });
  }

  // Hook admin buttons
  makeTeamsBtn.addEventListener('click', makeTeams);
  nextRoundBtn.addEventListener('click', prepareNextRound);
})();</script>
  <div id="toast" class="toast"></div>
  
</body>
</html>
